<template name="showings_list">
    {{#if hasShowings}}
        <table class="showings-list">
            <tr>
                {{#each headers}}
                    <th class="showing-list-header{{#if sortId}} sortable{{/if}}">
                        <span>{{name}}</span>
                        {{>sort_icon}}
                    </th>
                {{/each}}
            </tr>
            {{#each showings}}
                <tr>
                    <td class="showing">{{>movie_name}}</td>
                    {{#if withRatingHeaders}}
                        {{#each rating}}
                            <td class="rating">{{>movie_rating_value}}</td>
                        {{/each}}
                    {{/if}}
                    <td class="showing-sessions">{{>showing_times}}</td>
                </tr>
            {{/each}}
        </table>
    {{else}}
        <div class="showing no-showing">Нет сеансов</div>
    {{/if}}
</template>

<template name="sort_icon">
    {{#with sortInfo}}
        <span class="sort-icon ui-icon ui-icon-circle-triangle-{{#if equal order 1}}s{{else}}n{{/if}}"></span>
    {{/with}}
</template>
        
<template name="movie_name">
    <a class="movie" data-movie="{{movie}}" href="{{movieUrl}}" target="_blank">{{movie}}</a>{{>movie_info}}
</template>
        
<template name="movie_info">
    {{#if movie}}
        <div class="movie-info-icon ui-icon ui-icon-info">
            {{#with movie}}{{>movie_info_content}}{{/with}}
        </div>
    {{/if}}
</template>

<template name="movie_info_content">
    <div class="movie-info" title="{{title}}">
        {{#with info}}
        <div class="col-left">
            <a class="poster-link" href="{{url}}" target="_blank"><img class="poster" src="{{poster}}"/></a>
            <div class="rating">{{>movie_rating}}</div>
        </div>
        <div class="col-right">
            <div class="description">{{{description}}}</div>
        </div>
        {{/with}}
    </div>
</template>

<template name="movie_rating">
    {{#each ratings}}
    <div>{{name}}: {{>movie_rating_value}}</div>
    {{/each}}
</template>

<template name="movie_rating_value">
    <span class="rating-group-{{ratingGroup}}">{{#if rating}}{{rating}}{{else}}-{{/if}}</span>
</template>

<template name="showing_times">
    <span class="sessions">
        {{#each times}}
        <span class="session cinema-{{cinemaId}}{{#if is3D}} is3D{{/if}}">{{time}}</span>&nbsp;
        {{else}}
        <span class="session no-session">Нет сеансов в указанное время</span>
        {{/each}}
    </span>
</template>